<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ===========================
       META + PRE-PAINT THEME
       =========================== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Resource Hub | Ducks in the Pool</title>
  <script>
    (function() {
      const savedTheme = localStorage.getItem("theme");
      const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
      const theme = savedTheme || (prefersDark ? "dark" : "light");
      document.documentElement.dataset.theme = theme;
      document.addEventListener("DOMContentLoaded", () => {
        document.body.dataset.theme = theme;
      });
      const accent = localStorage.getItem("accent") || "#0a84ff";
      document.documentElement.style.setProperty("--accent", accent);
      const meta = document.createElement("meta");
      meta.name = "theme-color";
      meta.content = theme === "dark" ? "#111216" : "#f7f8fa";
      document.head.appendChild(meta);
    })();
  </script>

  <!-- ===========================
       STYLES (theme-aware, responsive, sidebar 240px)
       =========================== -->
  <style>
    :root{
      --sidebar-width:240px; /* nudged as requested */
      --radius:10px;
      --gap:10px;
      --blur:12px;
      --accent:#0a84ff;
      --accent-strong:#0066d6;
      --bg-light:#f7f8fa;
      --bg-dark:#0f1113;
      --text-light:#0b1220;
      --text-dark:#f5f5f7;
      --palette-size:14px;
    }

    [data-theme="light"]{
      --bg:var(--bg-light);
      --text:var(--text-light);
      --sidebar-bg: rgba(255,255,255,0.92);
      --sidebar-border: rgba(0,0,0,0.06);
      --card-bg: rgba(255,255,255,0.95);
      --card-border: rgba(0,0,0,0.06);
      --btn-bg-surface: rgba(255,255,255,0.6);
      --btn-border: rgba(0,0,0,0.06);
      --btn-text: var(--text-light);
    }

    [data-theme="dark"]{
      --bg:var(--bg-dark);
      --text:var(--text-dark);
      --sidebar-bg: rgba(16,16,18,0.72);
      --sidebar-border: rgba(255,255,255,0.06);
      --card-bg: rgba(255,255,255,0.03);
      --card-border: rgba(255,255,255,0.06);
      --btn-bg-surface: rgba(255,255,255,0.03);
      --btn-border: rgba(255,255,255,0.06);
      --btn-text: var(--text-dark);
    }

    html,body{height:100%}
    body{
      margin:0; display:flex; height:100vh;
      font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg); color:var(--text);
      transition: background .2s ease, color .2s ease;
    }

    /* ASIDE */
    aside{
      width:var(--sidebar-width);
      min-width:180px;
      padding:12px;
      box-sizing:border-box;
      display:flex; flex-direction:column; gap:var(--gap);
      border-right:1px solid var(--sidebar-border);
      background: linear-gradient(180deg, color-mix(in srgb,var(--accent)10%,var(--sidebar-bg)) 0%, var(--sidebar-bg) 100%);
      backdrop-filter: blur(var(--blur)) saturate(140%);
    }
    header{ font-size:1.15rem; font-weight:700; margin-bottom:4px; }

    input[type="search"]{
      width:100%; padding:.5rem .8rem; border-radius:10px;
      border:1px solid rgba(0,0,0,.06); background:var(--btn-bg-surface);
      color:inherit; box-sizing:border-box;
    }

    .nav-section{ display:flex; flex-direction:column; gap:.45rem; margin-top:6px; overflow:auto; padding-right:6px; }
    .nav-section button{
      text-align:left; padding:.55rem .9rem; border-radius:9px; border:none;
      background:transparent; color:inherit; font-weight:600; font-size:0.95rem;
      transition: transform .12s ease, background .12s ease;
    }
    .nav-section button:hover{ transform: translateX(6px); background: color-mix(in srgb,var(--accent)10%,transparent); }
    .nav-section button.active{ background:var(--accent-strong); color:#fff; box-shadow: 0 8px 24px color-mix(in srgb,var(--accent)18%, transparent); }

    /* TOGGLES (only theme + colors) */
    .toggles-row{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:6px; }
    .toggles-left{ display:flex; gap:8px; align-items:center; }
    .toggles-right{ display:flex; gap:8px; align-items:center; }

    .icon-btn{
      width:40px; height:40px; border-radius:10px; border:1px solid var(--btn-border);
      display:inline-flex; align-items:center; justify-content:center; background:var(--btn-bg-surface);
      color:var(--btn-text); cursor:pointer; font-size:16px; padding:0; box-sizing:border-box;
      transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
    }
    .icon-btn.primary{ background:var(--accent); color:#fff; border-color:transparent; box-shadow:0 8px 24px color-mix(in srgb,var(--accent)20%,transparent); }
    .icon-btn:hover{ transform: translateY(-3px); }

    /* color palette */
    .color-palette{ display:flex; gap:8px; align-items:center; }
    .color-dot{
      width:var(--palette-size); height:var(--palette-size); border-radius:50%; cursor:pointer;
      border:2px solid rgba(255,255,255,0.06); box-sizing:border-box; display:inline-block;
      transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease;
      opacity:0.95;
    }
    .color-dot.active{
      transform: scale(1.14);
      box-shadow: 0 8px 20px color-mix(in srgb,var(--accent)22%, transparent);
      opacity:1;
    }

    /* accessible select fallback on small screens */
    #color-select{ display:none; padding:.45rem; border-radius:8px; border:1px solid var(--btn-border); background:transparent; color:inherit; }

    /* MAIN */
    main{ flex:1; overflow-y:auto; padding:14px 22px; box-sizing:border-box; min-width:0; }
    h2{ display:flex; align-items:center; justify-content:space-between; gap:12px; position:sticky; top:0; z-index:10; background: linear-gradient(180deg, rgba(0,0,0,0.02), transparent); padding:10px 0; margin:0 0 12px 0; }
    main #grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:14px; }

    .card{ background:var(--card-bg); border-radius:12px; padding:12px; border:1px solid var(--card-border); display:flex; flex-direction:column; gap:8px; min-height:56px; box-sizing:border-box; position:relative; transition: transform .12s ease, box-shadow .12s ease; }
    .card:hover{ transform: translateY(-6px); box-shadow: 0 10px 30px rgba(0,0,0,0.06); }
    .card-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
    .card-header strong{ font-size:1rem; margin:0; word-break:break-word; }
    .card small{ color:rgba(0,0,0,0.55); }

    .star{ cursor:pointer; font-size:1.05rem; background:transparent; border:none; color:rgba(0,0,0,0.45); }
    .star.active{ color:var(--accent-strong); }

    /* floating */
    #to-top{ position:fixed; bottom:22px; right:22px; width:44px; height:44px; border-radius:9px; border:none; background:var(--accent); color:#fff; display:none; cursor:pointer; }
    #to-top.visible{ display:block; }
    .unhide-sidebar-btn{ display:none; position:fixed; left:12px; bottom:80px; z-index:9999; width:44px; height:44px; border-radius:9px; border:none; display:flex; align-items:center; justify-content:center; font-size:18px; cursor:pointer; background:var(--accent); color:#fff; box-shadow:0 6px 18px rgba(0,0,0,0.18); }
    body.hide-sidebar .unhide-sidebar-btn{ display:flex; }

    /* responsive: collapse aside to top */
    @media (max-width:900px){
      aside{ width:100%; min-width:0; flex-direction:row; align-items:center; gap:12px; padding:10px; border-right:none; border-bottom:1px solid var(--sidebar-border); }
      .nav-section{ flex-direction:row; gap:8px; margin:0; overflow:auto; padding:6px 0; white-space:nowrap; }
      .toggles-row{ order:2; flex:1; justify-content:flex-end; }
      main{ padding:12px; }
    }

    @media (max-width:560px){
      main #grid{ grid-template-columns: repeat(1, 1fr); gap:10px; }
      .color-palette{ display:none; } /* use select on small */
      #color-select{ display:block; }
    }
  </style>
</head>

<body>
  <!-- ===========================
       ASIDE / SIDEBAR
       =========================== -->
  <aside>
    <div style="display:flex; flex-direction:column; gap:8px; flex:1; min-width:0;">
      <header>Resource Hub</header>

      <input id="search" type="search" placeholder="Search…" aria-label="Search resources" />

      <div class="nav-section" id="nav-section" role="navigation" aria-label="Resource groups"></div>
    </div>

    <!-- only theme + color controls -->
    <div class="toggles-row" aria-hidden="false">
      <div class="toggles-left">
        <!-- theme button uses SVG icons (swapped in JS) -->
        <button id="theme-toggle" type="button" class="icon-btn primary" title="Toggle theme" aria-pressed="false" aria-label="Toggle light or dark theme"></button>
      </div>

      <div class="toggles-right">
        <div class="color-palette" id="color-palette" aria-hidden="true"></div>
        <select id="color-select" aria-label="Choose accent color"></select>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main id="content">
    <h2><span id="section-title"></span></h2>
    <div id="grid" aria-live="polite"></div>
  </main>

  <!-- FLOATING -->
  <button id="to-top" type="button" aria-label="Scroll to top">↑</button>
  <button id="unhide-sidebar-btn" class="unhide-sidebar-btn" type="button" aria-label="Show sidebar">⫸</button>

  <!-- dashboard.js -->
  <script src="dashboard.js" defer></script>

  <!-- to-top + unhide helper -->
  <script>
    (function(){
      const topBtn = document.getElementById('to-top');
      if (topBtn) {
        function updateTop(){ topBtn.classList.toggle('visible', window.scrollY > 400); }
        window.addEventListener('scroll', updateTop, { passive: true });
        topBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
        updateTop();
      }

      const unhideBtn = document.getElementById('unhide-sidebar-btn');
      if (unhideBtn) {
        unhideBtn.addEventListener('click', (e) => {
          e.preventDefault();
          document.body.classList.remove('hide-sidebar');
          try { localStorage.removeItem('hide-sidebar'); } catch (e) {}
        });
        const obs = new MutationObserver(() => {
          unhideBtn.style.display = document.body.classList.contains('hide-sidebar') ? 'flex' : 'none';
        });
        obs.observe(document.body, { attributes: true, attributeFilter: ['class'] });
        unhideBtn.style.display = document.body.classList.contains('hide-sidebar') ? 'flex' : 'none';
      }
    })();
  </script>
</body>
</html>
