<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commission Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <style>
        /* =========================================
           1. CORE RESET & VARIABLES
           ========================================= */
        :root {
            --bg-body: #0f172a;
            --bg-card: #1e293b;
            --bg-card-hover: #334155;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --accent-blue: #38bdf8;
            --shadow-deep: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            --font-stack: 'Inter', sans-serif;
        }

        body.light-mode {
            --bg-body: #f1f5f9;
            --bg-card: #ffffff;
            --bg-card-hover: #f8fafc;
            --text-main: #020617;
            --text-muted: #475569;
            --border-color: #cbd5e1;
            --accent-blue: #0369a1;
            --shadow-deep: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        html, body {
            width: 100%; height: 100%;
            overflow: hidden;
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: var(--font-stack);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            padding: 0;
            transition: background 0.5s ease;
        }

        /* =========================================
           2. MEME MODE (HYPERSPEED GRID)
           ========================================= */
        body.meme-mode {
            /* COOL PATTERN: Scrolling Cyber Grid */
            background-color: #050505;
            background-image:
                linear-gradient(rgba(0, 255, 0, 0.4) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 0, 0.4) 1px, transparent 1px);
            background-size: 50px 50px;

            /* HYPERSPEED BACKGROUND */
            animation: gridScroll 0.5s linear infinite;

            --text-main: #ffffff;
            --text-muted: #ffffff;
            --border-color: #000000;
            --accent-blue: #ffffff;

            --font-stack: 'Comic Sans MS', 'Comic Neue', cursive, sans-serif;
            cursor: progress;
        }

        @keyframes gridScroll {
            0% { background-position: 0 0; }
            100% { background-position: 50px 50px; }
        }

        /* Card Animation: GRADUAL RAINBOW + DVD BOUNCE */
        body.meme-mode .card {
            position: fixed;

            /* TRUE FULL SPECTRUM LOOP (Horizontal) */
            background: linear-gradient(
                to right,
                #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3, #ff0000
            );

            /* STRETCHED TO 1200% for very gradual transitions */
            background-size: 1200% auto;

            /* Smooth continuous flow */
            animation: rainbowFlow 5s linear infinite;

            border: 5px solid #000000;
            box-shadow: 15px 15px 0px rgba(0,0,0,0.8);
            z-index: 100;
            width: 400px;
            margin: 0;

            /* Make text readable on rainbow */
            color: white;
            text-shadow: 3px 3px 0px #000000;
        }

        @keyframes rainbowFlow {
            0% { background-position: 0% center; }
            100% { background-position: 100% center; }
        }

        /* Force ALL text inside card to have heavy shadow in meme mode */
        body.meme-mode .card * {
            text-shadow: 3px 3px 0px #000000 !important;
            color: white !important;
        }

        /* Marquee Ticker (SEAMLESS LOOP) */
        .marquee-container {
            position: fixed; top: 0; left: 0; width: 100%;
            background: #000; color: #00ff00;
            font-family: 'Courier New', monospace;
            font-weight: bold; padding: 10px 0;
            z-index: 1000; display: none;
            border-bottom: 2px solid #00ff00;
            white-space: nowrap;
            overflow: hidden;
        }
        body.meme-mode .marquee-container { display: flex; }

        .marquee-content {
            display: inline-block;
            white-space: nowrap;
            /* SLOWER MARQUEE: 25s for readable, seamless loop */
            animation: marquee 25s linear infinite;
            padding-right: 50px;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }

        /* Falling Memes */
        .meme-rain-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0;
            display: none;
        }
        body.meme-mode .meme-rain-container { display: block; }

        .falling-item {
            position: absolute; top: -50px;
            font-size: 2rem; opacity: 1;
            animation: fall linear forwards;
            filter: drop-shadow(2px 2px 0px rgba(0,0,0,0.8));
        }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        /* Doge Text Phrases */
        .doge-text {
            position: absolute;
            font-family: 'Comic Sans MS', cursive;
            font-weight: bold;
            opacity: 0;
            text-shadow: 2px 2px 0px #000;
            animation: dogeFloat 3s ease-out forwards;
            pointer-events: none;
            z-index: 50;
        }
        @keyframes dogeFloat {
            0% { transform: scale(0.5); opacity: 0; }
            20% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0; margin-top: -50px; }
        }

        /* =========================================
           3. STANDARD COMPONENTS
           ========================================= */
        .card {
            position: relative;
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            width: 90%; max-width: 440px;
            padding: 4rem 2.5rem;
            text-align: center;
            box-shadow: var(--shadow-deep);
            display: flex; flex-direction: column; align-items: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .header-title {
            font-size: 0.8rem; font-weight: 800; letter-spacing: 3px;
            text-transform: uppercase; color: var(--text-muted);
            margin-bottom: 1.5rem;
            cursor: pointer; user-select: none;
            transition: all 0.3s;
        }

        /* Meme Title */
        body.meme-mode .header-title {
            font-size: 2rem;
            letter-spacing: 0px;
            transform: rotate(-2deg);
        }

        /* Click Feedback */
        .click-pop {
            position: absolute; left: 50%; top: -30px;
            transform: translateX(-50%);
            font-weight: 900; font-size: 1.5rem; color: var(--accent-blue);
            animation: floatUp 0.6s ease-out forwards; pointer-events: none;
        }
        @keyframes floatUp {
            from { transform: translate(-50%, 0); opacity: 1; }
            to { transform: translate(-50%, -30px); opacity: 0; }
        }

        .separator {
            width: 100%; height: 1px;
            background: linear-gradient(90deg, transparent, var(--border-color), transparent);
            margin-bottom: 3rem; opacity: 0.3;
        }

        .label {
            font-size: 0.75rem; font-weight: 700; color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 1.5px;
            display: block; margin-bottom: 0.75rem;
        }

        .date-main {
            font-size: 2.25rem; font-weight: 700; color: var(--text-main);
            line-height: 1; letter-spacing: -1px; min-height: 2.5rem;
            display: flex; justify-content: center; align-items: center; gap: 10px;
        }

        .date-highlight {
            font-size: 2.5rem; font-weight: 800; color: var(--accent-blue);
            line-height: 1; letter-spacing: -1px;
            margin-bottom: 0.25rem;
            transition: color 0.3s;
            min-height: 2.5rem;
        }

        .arrow-spacer {
            margin: 2rem 0; color: var(--text-muted);
            display: flex; justify-content: center; opacity: 0.5;
        }
        .arrow-spacer svg { width: 24px; height: 24px; }

        /* The Button */
        .adp-link {
            position: relative;
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            width: 100%; max-width: 440px;
            border-radius: 16px;
            padding: 1.5rem 1.5rem 2.5rem 1.5rem;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-decoration: none; cursor: pointer;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: transform 0.2s ease, border-color 0.2s ease, background-color 0.2s ease;
        }

        .adp-link:hover {
            transform: translateY(-2px);
            border-color: var(--accent-blue);
            background-color: var(--bg-card-hover);
        }

        /* Meme Button overrides */
        body.meme-mode .adp-link {
            border: 3px solid #000;
            background: rgba(0,0,0,0.2) !important; /* See through to rainbow */
        }
        body.meme-mode .adp-link:hover {
            transform: scale(1.1) rotate(3deg);
            background: rgba(0,0,0,0.4) !important;
        }

        .link-hint {
            position: absolute; bottom: 1rem; left: 0; right: 0;
            font-size: 0.75rem; font-weight: 600; color: var(--accent-blue);
            text-transform: uppercase; letter-spacing: 1.5px;
            opacity: 0; transform: translateY(5px); transition: all 0.3s ease;
        }
        .adp-link:hover .link-hint { opacity: 1; transform: translateY(0); }

        body.meme-mode .link-hint { opacity: 1; transform: none; font-size: 1rem; font-weight: 900; }

        /* Theme Toggle */
        .theme-btn {
            position: absolute; top: 24px; right: 24px;
            background: transparent; border: none;
            color: var(--text-muted); cursor: pointer; padding: 10px; border-radius: 50%;
            transition: color 0.2s, background 0.2s;
        }
        .theme-btn:hover { color: var(--text-main); background: rgba(125,125,125,0.1); }

    </style>
</head>
<body>

    <div class="marquee-container">
        <div class="marquee-content">
            ðŸš€ STONKS ONLY GO UP ðŸš€ DIAMOND HANDS ðŸ’ŽðŸ™Œ HODL HODL HODL ðŸš€ TO THE MOON ðŸš€ COMMISSION SECURED ðŸ’¸ &nbsp;&nbsp;&nbsp; ðŸš€ STONKS ONLY GO UP ðŸš€ DIAMOND HANDS ðŸ’ŽðŸ™Œ HODL HODL HODL ðŸš€ TO THE MOON ðŸš€ COMMISSION SECURED ðŸ’¸
        </div>
        <div class="marquee-content">
            ðŸš€ STONKS ONLY GO UP ðŸš€ DIAMOND HANDS ðŸ’ŽðŸ™Œ HODL HODL HODL ðŸš€ TO THE MOON ðŸš€ COMMISSION SECURED ðŸ’¸ &nbsp;&nbsp;&nbsp; ðŸš€ STONKS ONLY GO UP ðŸš€ DIAMOND HANDS ðŸ’ŽðŸ™Œ HODL HODL HODL ðŸš€ TO THE MOON ðŸš€ COMMISSION SECURED ðŸ’¸
        </div>
    </div>

    <div class="meme-rain-container" id="meme-container"></div>

    <div id="doge-container"></div>

    <div class="card" id="main-card">

        <button class="theme-btn" id="theme-toggle" title="Switch Theme">
            <svg class="icon-moon" style="display:none;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
        </button>

        <div style="position: relative; width: 100%; text-align: center;">
            <div class="header-title" id="app-title" title="Secret: Click 5 times">Commission Tracker</div>
        </div>

        <div class="separator"></div>

        <div>
            <span class="label">Current Month</span>
            <div class="date-main" id="current-date">...</div>
        </div>

        <div class="arrow-spacer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>
        </div>

        <a href="https://ihcm.adp.com/whrmux/web/me/home" target="_blank" class="adp-link" title="Open ADP Payslips">
            <span class="label">Commission For</span>
            <div class="date-highlight" id="commission-date">...</div>
            <div class="link-hint" id="link-hint-text">View on ADP &rarr;</div>
        </a>

    </div>

    <script>
        const cardEl = document.getElementById('main-card');
        const currentDateEl = document.getElementById('current-date');
        const commissionDateEl = document.getElementById('commission-date');
        const themeBtn = document.getElementById('theme-toggle');
        const iconMoon = document.querySelector('.icon-moon');
        const iconSun = document.querySelector('.icon-sun');
        const titleEl = document.getElementById('app-title');
        const rainContainer = document.getElementById('meme-container');
        const linkHintEl = document.getElementById('link-hint-text');
        const dogeContainer = document.getElementById('doge-container');

        let isMemeMode = false;
        let rainInterval;
        let dogeInterval;
        let bounceAnimId;

        // Physics State for DVD Bounce
        let cx = 0, cy = 0, cvx = 3, cvy = 3;

        /* ----------------------------------------------------
           1. DATE LOGIC
           ---------------------------------------------------- */
        const now = new Date();
        const currentString = `${now.toLocaleDateString('en-GB', { month: 'long' })} ${now.getFullYear()}`;
        const lagDate = new Date(now.getFullYear(), now.getMonth(), 1);
        lagDate.setMonth(lagDate.getMonth() - 3);
        const commissionString = `${lagDate.toLocaleDateString('en-GB', { month: 'long' })} ${lagDate.getFullYear()}`;

        function renderText() {
            commissionDateEl.innerText = commissionString;

            if (isMemeMode) {
                titleEl.innerText = "ðŸ“ˆ STONKS TRACKER ðŸ“ˆ";
                linkHintEl.innerText = "TAKE MY MONEY!!!";
                currentDateEl.innerHTML = `ðŸ”¥ ${currentString} ðŸ”¥`; // Meme: Fire Emojis
            } else {
                titleEl.innerText = "Commission Tracker";
                linkHintEl.innerText = "View on ADP \u2192";
                currentDateEl.innerText = currentString; // Standard: Text Only
            }
        }

        renderText();

        /* ----------------------------------------------------
           2. DVD BOUNCE PHYSICS
           ---------------------------------------------------- */
        const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];

        function startBouncing() {
            // Set start position center
            const maxX = window.innerWidth - cardEl.offsetWidth;
            const maxY = window.innerHeight - cardEl.offsetHeight;
            cx = maxX / 2; cy = maxY / 2;
            cvx = (Math.random() > 0.5 ? 4 : -4);
            cvy = (Math.random() > 0.5 ? 4 : -4);

            function update() {
                cx += cvx; cy += cvy;

                const limitX = window.innerWidth - cardEl.offsetWidth;
                const limitY = window.innerHeight - cardEl.offsetHeight;
                let hit = false;

                if (cx <= 0) { cx = 0; cvx *= -1; hit = true; }
                else if (cx >= limitX) { cx = limitX; cvx *= -1; hit = true; }

                if (cy <= 0) { cy = 0; cvy *= -1; hit = true; }
                else if (cy >= limitY) { cy = limitY; cvy *= -1; hit = true; }

                cardEl.style.left = cx + 'px';
                cardEl.style.top = cy + 'px';

                bounceAnimId = requestAnimationFrame(update);
            }
            update();
        }

        /* ----------------------------------------------------
           3. MEME RAIN & DOGE PHRASES
           ---------------------------------------------------- */
        const memeEmojis = ['ðŸ’Ž', 'ðŸ™Œ', 'ðŸš€', 'ðŸ¦', 'ðŸŒ™', 'ðŸ’°', 'ðŸ“ˆ', 'ðŸ’¸'];
        const dogePhrases = ["Much Money", "Very Commission", "So Wealth", "Wow", "Stonks", "To The Moon!", "HODL"];

        function createRain() {
            if (!isMemeMode) return;
            const el = document.createElement('div');
            el.classList.add('falling-item');
            el.innerText = memeEmojis[Math.floor(Math.random() * memeEmojis.length)];
            el.style.left = Math.random() * 100 + 'vw';
            el.style.animationDuration = (Math.random() * 2 + 2) + 's';
            el.style.fontSize = (Math.random() * 2 + 1) + 'rem';
            rainContainer.appendChild(el);
            setTimeout(() => el.remove(), 4000);
        }

        function spawnDoge() {
            if (!isMemeMode) return;
            const el = document.createElement('div');
            el.classList.add('doge-text');
            el.innerText = dogePhrases[Math.floor(Math.random() * dogePhrases.length)];
            // Bright readable colors
            const dogeColors = ['#fff', '#ffff00', '#00ff00', '#00ffff'];
            el.style.color = dogeColors[Math.floor(Math.random() * dogeColors.length)];

            el.style.left = Math.random() * 80 + 10 + 'vw';
            el.style.top = Math.random() * 80 + 10 + 'vh';
            el.style.fontSize = (Math.random() * 1 + 1.5) + 'rem';
            dogeContainer.appendChild(el);
            setTimeout(() => el.remove(), 3000);
        }

        function toggleMemeMode() {
            isMemeMode = !isMemeMode;
            document.body.classList.toggle('meme-mode');
            renderText();

            if (isMemeMode) {
                // Start Physics
                startBouncing();
                // Start Particles
                rainInterval = setInterval(createRain, 150);
                dogeInterval = setInterval(spawnDoge, 800);
            } else {
                // Stop Physics
                cancelAnimationFrame(bounceAnimId);
                cardEl.style.left = ''; cardEl.style.top = ''; cardEl.style.borderColor = ''; cardEl.style.boxShadow = '';

                // Stop Particles
                clearInterval(rainInterval);
                clearInterval(dogeInterval);
                rainContainer.innerHTML = '';
                dogeContainer.innerHTML = '';
            }
        }

        /* ----------------------------------------------------
           4. CLICK TRIGGER
           ---------------------------------------------------- */
        let clickCount = 0;
        let clickTimer;

        titleEl.addEventListener('click', (e) => {
            clickCount++;

            const feedback = document.createElement('div');
            feedback.classList.add('click-pop');
            feedback.innerText = isMemeMode ? "WOW" : `+${clickCount}`;
            titleEl.parentNode.appendChild(feedback);
            setTimeout(() => feedback.remove(), 600);

            clearTimeout(clickTimer);
            clickTimer = setTimeout(() => { clickCount = 0; }, 800);

            if (clickCount >= 5) {
                toggleMemeMode();
                clickCount = 0;
            }
        });

        /* ----------------------------------------------------
           5. THEME TOGGLE
           ---------------------------------------------------- */
        themeBtn.addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            iconSun.style.display = isLight ? 'none' : 'block';
            iconMoon.style.display = isLight ? 'block' : 'none';
        });

    </script>
</body>
</html>
